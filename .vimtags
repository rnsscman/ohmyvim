#!/bin/sh

function gtags_remove() {
	if [ -e GPATH ]; then
		rm -v GPATH
	fi
	if [ -e GRTAGS ]; then
		rm -v GRTAGS
	fi
	if [ -e GTAGS ]; then
		rm -v GTAGS
	fi
}

function gtags_create() {
    if [ $# -eq 0 ]; then
        gtags_remove
        gtags
    else
        if [ "$1" = "arm" ]; then
            gtags_remove
            if [ -e Makefile ]; then
                make gtags ARCH=$1
            fi
            if [ ! -e GTAGS ]; then
                gtags
            fi
        fi 
    fi
}

if [ $# -eq 0 ]; then
    gtags_create
else
    if [ "$1" = "--clean" ]; then
        gtags_remove
    else
        gtags_create $1
    fi
fi
